<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>維修保養預約 | 明德車業 MINGDE MOTOR</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/booking-common.css">
</head>
<body>

    <header>
        <a href="index.html" class="logo-container">
            <img src="image/logo.jpg" alt="明德車業 Logo" class="logo-img">
        </a>
        <nav class="nav-list">
            <a href="index.html">首頁</a>
            <a href="products.html">現車庫存</a>
            <a href="booking-ride.html" class="nav-btn ride">預約試乘</a>
            <a href="booking-service.html" class="nav-btn">保養預約</a>
            <a href="event-signup.html">活動報名</a>
        </nav>
    </header>

    <main class="booking-section">
        <div class="booking-card">
            <h2>維修保養預約</h2>
            <span class="booking-subtitle">SERVICE & REPAIR</span>
            
            <form class="booking-form" onsubmit="alert('保養預約已送出，我們將盡快與您聯繫！'); return true;">
                <input type="text" placeholder="您的姓名 / 車主稱呼" required>
                <input type="tel" placeholder="聯絡電話" required>
                <input type="text" placeholder="車型名稱 (例如: Ninja 650 / AK550)" required>

                <select id="serviceType" required>
                    <option value="" disabled selected>— 請選擇保養/維修項目 —</option>
                    <option value="check_condition" style="color: var(--kawa-green); font-weight: bold;">⚠️ 不清楚，請幫我看看車況 (現場診斷)</option>
                    
                    <optgroup label="【 常規保養 】">
                        <option value="oil">基礎機油更換</option>
                        <option value="major">大保養 (噴油嘴/節流閥清洗)</option>
                        <option value="inspection">年度安全健檢</option>
                    </optgroup>
                    <optgroup label="【 耗材更換 】">
                        <option value="tires">輪胎更換檢查</option>
                        <option value="brakes">煞車系統/來令片</option>
                        <option value="chain">鏈條清潔/調整/更換</option>
                    </optgroup>
                    <optgroup label="【 其他維修 】">
                        <option value="accident">事故估價/理賠維修</option>
                        <option value="engine">引擎/傳動系統異音</option>
                        <option value="other">其他需求 (請於備註說明)</option>
                    </optgroup>
                </select>

                <div class="form-row">
                    <input type="date" id="bookDate" onchange="generate24HSlots()" required>
                    <select id="timeSelect" required>
                        <option value="" disabled selected>預約時間</option>
                    </select>
                </div>
                <div id="dateError" class="date-hint">⚠️ 週日公休，請選擇其他日期</div>

                <textarea placeholder="請簡述您的車況（例如：有異音、漏油、發動困難等）" rows="3"></textarea>
                <button type="submit" class="btn-submit">確認提交預約</button>
            </form>
        </div>
    </main>

    <section class="footer-info">
            <div class="footer-container">
                <div class="footer-column">
                    <h4>服務項目</h4>
                    <ul>
                        <li><a href="products.html">現車庫存</a></li>
                        <li><a href="booking-ride.html">預約試乘</a></li>
                        <li><a href="booking-service.html">預約保養</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>門市位置</h4>
                    <p>高雄市三民區九如二路 575 號</p>
                    <a href="https://www.google.com/maps/dir/?api=1&destination=明德車業有限公司" 
                    target="_blank" class="nav-link">
                    ➤ 開啟 Google 導航
                    </a>
                </div>
                <div class="footer-column">
                    <h4>營業時間</h4>
                    <p>週一至週五：09:30 – 20:30</p>
                    <p>週六：09:30 – 18:00 (隔週休)</p>
                    <p style="color: #ff4d4d; font-weight: bold;">週日：休息</p>
                </div>
                <div class="footer-column">
                    <h4 style="margin-bottom: 20px;">聯絡資訊</h4>
                    <p>Tel: <a href="tel:073111111" class="footer-link">07-311-1111</a></p>
                    <p>FB: <a href="https://www.facebook.com/MingDeCheYeYouXianGongSi/?locale=zh_TW" target="_blank" class="footer-link">明德車業有限公司</a></p>
                    <p>Gmail: <a href="mailto:kawasaki9750@gmail.com" class="footer-link">kawasaki9750@gmail.com</a></p>
                    <p>Line@: <a href="https://line.me/R/ti/p/@mdmotors" target="_blank" class="footer-link">@mdmotors</a></p>
                </div>
            </div>
        </section>

    <script>
        // 設定最小預約日期為明天
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        document.getElementById('bookDate').setAttribute('min', tomorrow.toISOString().split('T')[0]);

        function generate24HSlots() {
            const dateInput = document.getElementById('bookDate');
            const timeSelect = document.getElementById('timeSelect');
            const dateError = document.getElementById('dateError');
            const selectedDate = new Date(dateInput.value);
            const day = selectedDate.getDay(); 

            if (day === 0) {
                dateError.style.display = 'block';
                dateInput.value = '';
                timeSelect.innerHTML = '<option value="" disabled selected>預約時間</option>';
                return;
            } else {
                dateError.style.display = 'none';
            }

            // 營業時間邏輯：平日到 20:30，週六到 18:00
            let startHour = 9;
            let startMin = 30;
            let endHour = (day === 6) ? 18 : 20; 
            let endMin = (day === 6) ? 0 : 30;

            let options = '<option value="" disabled selected>預約時間</option>';
            
            for (let h = startHour; h <= endHour; h++) {
                for (let m = 0; m < 60; m += 30) {
                    if (h === 9 && m < 30) continue;
                    if (h === endHour && m > endMin) continue;

                    let hh = h.toString().padStart(2, '0');
                    let mm = m.toString().padStart(2, '0');
                    let timeStr = `${hh}:${mm}`;
                    options += `<option value="${timeStr}">${timeStr}</option>`;
                }
            }
            timeSelect.innerHTML = options;
        }
    </script>
</body>
</html>